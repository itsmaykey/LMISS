<div class="row">
  <div class="col-md-12">
          <div class="nav-align-bottom">
            <ul class="nav nav-pills flex-column flex-md-row custom-nav">
              <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#Account" role="tab" aria-selected="true">
                  <i class="bx bx-sm bx-user me-1"></i> Account
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" data-bs-target="#EducationalAttain" role="tab" aria-selected="false">
                    <i class="bx bx-sm bx-book-open me-1"></i> Educational Attainment
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" data-bs-toggle="tab" data-bs-target="#FamHistory" role="tab" aria-selected="false">
                    <i class="bx bx-sm bx-group me-1"></i> Family History
                </a>
            </li>
            <li class="nav-item">
              <a class="nav-link" data-bs-toggle="tab" data-bs-target="#EmployHisto" role="tab" aria-selected="false">
                  <i class="bx bx-sm bx-briefcase me-1"></i> Employment History
              </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" data-bs-toggle="tab" data-bs-target="#SubstanceHisto" role="tab" aria-selected="false">
                <i class="bx bx-sm bx-capsule me-1"></i> Substance Use History
            </a>
        </li>
        <li class="nav-item">
          <a class="nav-link" data-bs-toggle="tab" data-bs-target="#ApplicationHisto" role="tab" aria-selected="false">
            <i class="bx bx-sm bx-task me-1"></i> Application
          </a>
        </li>

            </ul>
          </div>
          <div class="tab-content custom-tab-content">
            <div class="tab-pane fade active show" id="Account" role="tabpanel">
          <!-- //Basic Data -->
          <div class="card mb-5">
            <!-- Account -->
            <div class="card-header">
              <h4 class="card-header-title">Personal Info</h4>
              <hr>
            </div>

            <div class="card-body pt-4">
              <div *ngIf="patientForm" >
                <form [formGroup]="patientForm"(ngSubmit)="patientFormSubmit()">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-3" hidden>
                        <label for="lname" class="form-label">Patient Code</label>
                        <input class="form-control" type="text" formControlName="patientCode" placeholder="Enter Last Name">
                      </div>
                      <div class="col-md-3">
                        <label for="lname" class="form-label">Last Name</label>
                        <input class="form-control" type="text" formControlName="pLastName" placeholder="Enter Last Name">
                      </div>
                      <div class="col-md-4">
                        <label for="fName" class="form-label">First Name</label>
                        <input class="form-control" type="text" formControlName="pFirstName" placeholder="Enter First Name">
                      </div>
                      <div class="col-md-3">
                        <label for="Mname" class="form-label">Middle Name</label>
                        <input class="form-control" type="text" formControlName="pMiddleName" placeholder="Enter Middle Name">
                      </div>
                      <div class="col-md-2">
                        <label for="Mname" class="form-label">Extn. Name</label>
                        <input class="form-control" type="text" formControlName="pExtName" placeholder="Enter Extn Name">
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-2">
                        <label for="birthdate" class="form-label">BirthDate</label>
                        <input type="date" class="form-control" formControlName="birthdate" placeholder="Enter Birthdate">
                      </div>

                      <div class="col-md-2">
                        <label for="bPalce" class="form-label">Birth Place</label>
                        <input type="text" class="form-control" formControlName="birthplace" placeholder="Enter Birth Place">
                      </div>
                      <div class="col-md-2">
                        <label for="sex" class="form-label">Sex</label>
                        <select formControlName="sex" class="select2 form-select">
                          <option value="" selected disabled>Select</option>
                          <option value=1>Male</option>
                          <option value=2>Female</option>
                        </select>
                      </div>
                      <div class="col-md-2">
                        <label for="civilStatusId" class="form-label">Civil Status</label>
                        <select formControlName="civilStatusId" class="select2 form-select">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let x of civilStatus" [value]="x.civ_ID">{{x.civ_Name}}</option>
                        </select>
                      </div>
                      <div class="col-md-3">
                        <label class="form-label" for="phoneNumber">Contact Number</label>
                        <div class="input-group input-group-merge">
                          <input type="text" formControlName="phoneNumber" class="form-control" placeholder="09xx xxx xxxx" maxlength="11">
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-4">
                        <label for="mun" class="form-label">Municipality</label>
                        <select class="select2 form-select" formControlName="citymunCode"  (change)="onMunicipalityChange($event)">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let x of citymun" [value]="x.citymunCode">{{x.citymunDesc}}</option>
                        </select>
                      </div>
                      <div class="col-md-4">
                        <label for="brgy" class="form-label">Barangay</label>
                        <select class="select2 form-select" formControlName="brgyCode" (change)="onBarangayChange($event)">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let x of brgy" [value]="x.brgyCode">{{x.brgyDesc}}</option>
                        </select>
                      </div>
                      <div class="col-md-4">
                        <label for="prkCode" class="form-label">Purok</label>
                        <select class="select2 form-select" formControlName="prkCode">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let x of prk" [value]="x.prkCode">{{x.prkDesc}}</option>
                        </select>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-3">
                        <label for="nickname" class="form-label">Nickname</label>
                        <input type="text" class="form-control" formControlName="pNickName" placeholder="Enter nickname">
                      </div>
                      <div class="col-md-3">
                        <label for="nationalityId" class="form-label">Nationality</label>
                        <select class="select2 form-select" formControlName="nationalityId">
                          <option value="" selected disabled>Select</option>
                          <option *ngFor="let x of nationality" [value]="x.citi_ID">{{x.city_Description}}</option>
                        </select>
                      </div>
                      <div class="col-md-3">
                        <label for="religionId" class="form-label">Religion</label>
                        <select class="select2 form-select" formControlName="religionId">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let x of religion" [value]="x.recNo">{{x.religionDesc}}</option>
                        </select>
                      </div>
                      <div class="col-md-3">
                        <label for="Occupation" class="form-label">Occupation</label>
                        <input type="text" class="form-control" formControlName="occupation" placeholder="Enter Occupation">
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-3">
                        <label for="educationalId" class="form-label">Educational Attainment</label>
                        <select class="select2 form-select" formControlName="educationalId">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let x of educationalAttainment" [value]="x.edu_ID">{{x.edu_Name}}</option>
                        </select>
                      </div>
                      <div class="col-md-2">
                        <label for="schoolLastAttended" class="form-label">Sch. Last Attended</label>
                        <input class="form-control" type="date" formControlName="schoolLastAttended">
                      </div>
                      <div class="col-md-2">
                        <label for="yearGraduated" class="form-label">Yr. Graduated</label>
                        <input type="number" class="form-control" formControlName="yearGraduated" placeholder="Enter Year">
                      </div>
                      <div class="col-md-3">
                        <label for="income" class="form-label">Income</label>
                        <input class="form-control" type="number" formControlName="income" placeholder="Enter Amount">
                      </div>
                    </div>
                    <hr>
                    <div class="mt-6">
                      <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
                      <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                    </div>

                  </div>
                </form>
              </div>

              <div class="card-footer text-end">
                <button type="button" class="btn btn-secondary text-white me-2" (click)="goToEducational()">
                    Next
                </button>

            </div>
            </div>
            <!-- /Account -->
          </div>
    </div>
    <div class="tab-pane fade hide" id="EducationalAttain" role="tabpanel">
        <div class="card mb-5">
          <div class="card-header">
            <h4 class="card-header-title">Educational Attainment</h4>
            <hr>
          </div>
<div *ngIf="patientSchoolForm">
  <form [formGroup]="patientSchoolForm"  (ngSubmit)="patientSchoolFormSubmit()">

    <div class="card-body pt-4">
        <div class="row g-4">
         <div class="row">
          <div class="col-md-9" hidden>
            <label  class="form-label">Elementary School</label>
            <input class="form-control" type="text" formControlName="patientCode" placeholder="Patient Code">
          </div>

          <div class="col-md-9">
            <label  class="form-label">Elementary School </label>
            <input class="form-control" type="text" formControlName="patientElementarySchool"  placeholder="Elementary School Name" >
          </div>
          <div class="col-md-2">
            <label for="bdate" class="form-label">Sch. Last Attended</label>
            <input class="form-control" type="date" formControlName="patientElementaryYear">
          </div>
          <div class="col-md-12">
            <label for="lname" class="form-label">School Address</label>
            <input class="form-control" type="text" formControlName="patientElementaryAddress" placeholder="Elementary School Address" >
          </div>
        </div>
        <div class="row">
          <div class="col-md-9">
            <label for="lname" class="form-label">High School</label>
            <input class="form-control" type="text" formControlName="patientHighScool" placeholder="High School Name" >
          </div>
          <div class="col-md-2">
            <label for="bdate" class="form-label">Sch. Last Attended</label>
            <input class="form-control" type="date" formControlName="patientHighSchoolYear" >
          </div>
          <div class="col-md-12">
            <label for="lname" class="form-label">School Address</label>
            <input class="form-control" type="text" formControlName="patientHighSchoolAddress" placeholder="High School Address" >
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <label for="lname" class="form-label">College School</label>
            <input class="form-control" type="text" formControlName="patientCollegeSchool" placeholder="College School Name" >
          </div>
          <div class="col-md-12">
            <label for="lname" class="form-label">Course</label>
            <input class="form-control" type="text" formControlName="patientCollegeCourse" placeholder="Course" >
          </div>
          <div class="col-md-12">
            <label for="lname" class="form-label">College School Address</label>
            <input class="form-control" type="text" formControlName="patientColleegeAddress" placeholder="College School Address" >
          </div>
        </div>

        </div>
        <hr>
        <div class="mt-6">
          <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
          <button type="reset" class="btn btn-outline-secondary">Cancel</button>
        </div>
    </div>

</form>
</div>

      <div class="card-footer text-end">
        <button type="button" class="btn btn-secondary text-white me-2" (click)="goToFamHisto()">
            Next
        </button>
    </div>
  </div>
    </div>
    <div class="tab-pane fade" id="FamHistory" role="tabpanel">
      <div class="nav-align-top nav-tabs-shadow mb-6">
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item active show" role="presentation">
            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#navsParent" role="tab" aria-selected="false">
              Parent
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button type="button" class="nav-link" role="tab" data-bs-toggle="tab" data-bs-target="#navSpouse" aria-controls="navs-top-profile" aria-selected="false" tabindex="-1">
              Spouse
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button type="button" class="nav-link" role="tab" data-bs-toggle="tab" data-bs-target="#navSiblings" aria-controls="navs-top-messages" aria-selected="false" tabindex="-1">
              Siblings
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button type="button" class="nav-link" role="tab" data-bs-toggle="tab" data-bs-target="#navChild" aria-controls="navs-top-Children" aria-selected="false" tabindex="-1">
              Children
            </button>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane fade active show" id="navsParent" role="tabpanel">
            <div *ngIf="patientParentForm" >
              <form [formGroup]="patientParentForm" (ngSubmit)="patientParentFormSubmit()">
            <div class="card-body pt-4">
              <div class="row g-4">
                <div class="row">
                  <div class="col-md-3" hidden>
                    <label for="lname" class="form-label">Patient Code</label>
                    <input class="form-control" type="text" formControlName="patientCode">
                  </div>
                  <div class="col-md-6">
                    <label for="fatherName" class="form-label">Father</label>
                    <input class="form-control" type="text" formControlName="fatherName" placeholder="Enter Full Name">
                  </div>
                  <div class="col-md-6">
                    <label for="motherName" class="form-label">Mother</label>
                    <input class="form-control" type="text"formControlName="motherName" placeholder="Enter Full Name">
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6">
                    <label for="fatherAddress" class="form-label">Father's Address</label>
                    <input class="form-control" type="text" id="fatherAddress" formControlName="fatherAddress" placeholder="Enter Address">
                  </div>
                  <div class="col-md-6">
                    <label for="motherAddress" class="form-label">Mother's Address</label>
                    <input class="form-control" type="text" id="motherAddress" formControlName="motherAddress" placeholder="Enter Address">
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-4">
                    <label for="fatherEducation" class="form-label">Father's Education</label>
                    <input class="form-control" type="text" id="fatherEducation" formControlName="fatherEducation" placeholder="Enter Education">
                  </div>
                  <div class="col-md-2">
                    <label for="fatherStatus" class="form-label">Living Arrangement</label>
                    <select id="fatherStatus" class="form-select" formControlName="fatherStatusId">
                      <option value="" disabled selected>Select</option>
                      <option *ngFor="let x of civilStatus" [value]="x.civ_ID">{{ x.civ_Name }}</option>
                    </select>
                  </div>
                  <div class="col-md-4">
                    <label for="motherEducation" class="form-label">Mother's Education</label>
                    <input class="form-control" type="text" id="motherEducation" formControlName="motherEducation" placeholder="Enter Education">
                  </div>
                  <div class="col-md-2">
                    <label for="motherStatus" class="form-label">Living Arrangement</label>
                    <select id="motherStatus" class="form-select" formControlName="motherStatusId">
                      <option value="" disabled selected>Select</option>
                      <option *ngFor="let x of civilStatus" [value]="x.civ_ID">{{ x.civ_Name }}</option>
                    </select>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-4">
                    <label for="fatherOccupation" class="form-label">Father's Occupation</label>
                    <input class="form-control" type="text" id="fatherOccupation" formControlName="fatherOccupation" placeholder="Enter Occupation">
                  </div>
                  <div class="col-md-2">
                    <label for="fatherIncome" class="form-label">Father's Income</label>
                    <input class="form-control" type="text" id="fatherIncome" formControlName="fatherIncome" placeholder="Enter Income">
                  </div>
                  <div class="col-md-4">
                    <label for="motherOccupation" class="form-label">Mother's Occupation</label>
                    <input class="form-control" type="text" id="motherOccupation" formControlName="motherOccupation" placeholder="Enter Occupation">
                  </div>
                  <div class="col-md-2">
                    <label for="motherIncome" class="form-label">Mother's Income</label>
                    <input class="form-control" type="text" id="motherIncome" formControlName="motherIncome" placeholder="Enter Income">
                  </div>
                </div>

              </div>

              <hr>
              <div class="mt-6">
                <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
                <button type="reset" class="btn btn-outline-secondary">Cancel</button>
              </div>
              <div class="card-footer text-end">
                <button type="button" class="btn btn-secondary text-white me-2" (click)="goToSpouse()">
                    Next
                </button>
            </div>
            </div>

              </form>
          </div>
        </div>

          <div class="tab-pane fade" id="navSpouse" role="tabpanel">
            <div *ngIf="patientSpouseForm" >
              <form [formGroup]="patientSpouseForm" (ngSubmit)="patientSpouseFormSubmit()">
            <div class="card-body pt-4">
              <div class="col-md-3" hidden>
                <label for="lname" class="form-label">Patient Code</label>
                <input class="form-control" type="text" formControlName="patientCode">
              </div>
              <div class="row g-4">
                   <div class="row">
                <div class="col-md-8">
                  <label for="lname" class="form-label">Spouse Name</label>
                  <input class="form-control" type="text" name="lname" formControlName="spouseName" id="lname" placeholder="Enter Full Name" >
                </div>
                <div class="col-md-3">
                  <label for="Nick" class="form-label">Nickname</label>
                  <input class="form-control" type="text" name="Nick" formControlName="spouseNickName" id="Nick" placeholder="Enter Nick Name" >
                </div>
                <div class="col-md-1">
                  <label for="Age" class="form-label">Age</label>
                  <input class="form-control" type="text" name="Age" formControlName="spouseAge" id="Age" placeholder="Age" >
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <label for="Address" class="form-label">Address</label>
                  <input class="form-control" type="text" name="Address" formControlName="spouseAddress" id="Address" placeholder="Enter Address" >
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <label for="Occupation" class="form-label">Occupation</label>
                  <input class="form-control" type="text" name="Occupation" formControlName="spouseOccupation" id="Occupation" placeholder="Enter Occupation" >
                </div>
                <div class="col-md-8">
                  <label for="Employer" class="form-label">Employer</label>
                  <input class="form-control" type="text" name="Employer" formControlName="spouseEmployer" id="Employer" placeholder="Enter Employer" >
                </div>
              </div>
              <div class="row">
                <div class="col-md-3">
                  <label for="spouseEduID" class="form-label">Educational Attainment</label>
                  <select class="select2 form-select" formControlName="spouseEduID">
                    <option value="" disabled selected>Select</option>
                    <option *ngFor="let x of educationalAttainment" [value]="x.edu_ID">{{x.edu_Name}}</option>
                  </select>
                </div>
                <div class="col-md-2">
                  <label for="Income" class="form-label">Income</label>
                  <input class="form-control" type="text" name="Income" formControlName="spouseIncome" id="Income" placeholder="Enter Income" >
                </div>
                <div class="col-md-2">
                  <label for="language" class="form-label">Living Arrangement</label>
                  <select id="language" class="select2 form-select" formControlName="spouseLivingArrangement">
                    <option value="" disabled selected>Select</option>
                    <option  *ngFor="let x of civilStatus" value="{{x.civ_ID}}">{{x.civ_Name}}</option>
                  </select>
                </div>
              </div>

              </div>
              <hr>
              <div class="mt-6">
                <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
                <button type="reset" class="btn btn-outline-secondary">Cancel</button>
              </div>
              <div class="card-footer text-end">
                <button type="button" class="btn btn-secondary text-white me-2" (click)="goToSibs()">
                    Next
                </button>
            </div>
          </div>
      </form>
        </div>
          </div>
          <div class="tab-pane fade" id="navSiblings" role="tabpanel">
            <div *ngIf="patientSiblingsForm" >

            <form [formGroup]="patientSiblingsForm" (ngSubmit)="patientSiblingsFormSubmit()">
              <div class="card-body pt-4">
                <div class="row g-4">
                  <div class="row">
                    <div class="col-md-12">
                      <table class="table table-bordered" id="siblingsTable">
                        <thead>
                          <tr>
                            <th>Siblings Name</th>
                            <th>Birthdate</th>
                            <th>Sex</th>
                            <th>Civil<br>Status</th>
                            <th>Occupation</th>
                            <th>Educational<br>Attainment</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody formArrayName="siblings">
                          <tr *ngFor="let sibling of siblings.controls; let i = index" [formGroupName]="i">

                            <td><input class="form-control" type="text" formControlName="siblingName" placeholder="Enter Last Name" required></td>
                            <td style="width: 8%;"> <input type="date" class="form-control" formControlName="siblingBirthDate" placeholder="Enter Birthdate"></td>
                            <td style="width: 10%;"><select class="select2 form-select" formControlName="siblingSexId">
                              <option value="" selected disabled>Select</option>
                              <option value=1>Male</option>
                              <option value=2>Female</option>
                            </select></td>
                            <td style="width: 10%;"><select class="select2 form-select" formControlName="siblingCivilStatusId">
                              <option value="" disabled selected>Select</option>
                              <option *ngFor="let x of civilStatus" [value]="x.civ_ID">{{x.civ_Name}}</option>
                            </select></td>
                            <td style="width: 15%;"><input class="form-control" type="text" formControlName="siblingOccupation" placeholder="Enter Occupation" required></td>
                            <td style="width: 15%;"><input class="form-control" type="text" formControlName="siblingEducationAttainment" placeholder="Enter Educational Attainment" required></td>
                            <td hidden style="width: 15%;"><input class="form-control" type="text" formControlName="siblingCode" ></td>
                            <td><button type="button" class="btn btn-danger" (click)="removeSibling(i)">Remove</button></td>
                          </tr>
                        </tbody>
                      </table>
                      <br>
                      <button type="button" class="btn btn-secondary" (click)="addSibling()">Add Row</button>
                    </div>
                  </div>
                </div>
                <hr>
                <div class="mt-6">
                  <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
                  <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                </div>
                <div class="card-footer text-end">
                  <button type="button" class="btn btn-secondary text-white me-2" (click)="goToChild()">
                    Next
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
          <div class="tab-pane fade" id="navChild" role="tabpanel">
            <div *ngIf="patientChildrenForm" >

              <form [formGroup]="patientChildrenForm" (ngSubmit)="patientChildrenFormSubmit()">
                <div class="card-body pt-4">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-12">
                        <table class="table table-bordered" id="ChildrenTable">
                          <thead>
                            <tr>
                              <th>Children Name</th>
                              <th>Birthdate</th>
                              <th>Sex</th>
                              <th>Civil<br>Status</th>
                              <th>Occupation</th>
                              <th>Educational<br>Attainment</th>
                              <th>Actions</th>
                            </tr>
                          </thead>
                          <tbody formArrayName="childrens">
                            <tr *ngFor="let children of childrens.controls; let i = index" [formGroupName]="i">

                              <td><input class="form-control" type="text" formControlName="childName" placeholder="Enter Full Name" required></td>
                              <td style="width: 8%;"> <input type="date" class="form-control" formControlName="childBirthDate" placeholder="Enter Birthdate"></td>
                              <td style="width: 10%;"><select class="select2 form-select" formControlName="childSexId">
                                <option value="" selected disabled>Select</option>
                                <option value=1>Male</option>
                                <option value=2>Female</option>
                              </select></td>
                              <td style="width: 10%;"><select class="select2 form-select" formControlName="childCivilStatusId">
                                <option value="" disabled selected>Select</option>
                                <option *ngFor="let x of civilStatus" [value]="x.civ_ID">{{x.civ_Name}}</option>
                              </select></td>
                              <td style="width: 15%;"><input class="form-control" type="text" formControlName="childOccupation" placeholder="Enter Occupation" required></td>
                              <td style="width: 15%;"><input class="form-control" type="text" formControlName="childEducationAttainment" placeholder="Enter Educational Attainment" required></td>
                              <td hidden style="width: 15%;"><input class="form-control" type="text" formControlName="childrenCode" ></td>
                              <td><button type="button" class="btn btn-danger" (click)="removechildren(i)">Remove</button></td>
                            </tr>
                          </tbody>
                        </table>
                        <br>
                        <button type="button" class="btn btn-secondary" (click)="addchildren()">Add Row</button>
                      </div>
                    </div>
                  </div>
                  <hr>
                  <div class="mt-6">
                    <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                  <div class="card-footer text-end">
                    <button type="button" class="btn btn-secondary text-white me-2" (click)="goToEmploy()">
                      Next
                    </button>
                  </div>
                </div>
              </form>
            </div>

          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane fade hide" id="EmployHisto" role="tabpanel">
      <div class="card">
      <div class="card-header">
        <h4 class="card-header-title">Employment Record</h4>
        <hr>
        </div>
        <div class="card-body">
          <div *ngIf="patientEmploymentForm" >
        <form [formGroup]="patientEmploymentForm!" (ngSubmit)="patientEmployeeFormSubmit()">
          <div class="row">
          <div class="col-md-12">
            <table class="table table-bordered">
            <thead>
              <tr>
              <th style="width: 15%;">Employment Period Date</th>
              <th style="width: 25%;">Name of Company/Agency</th>
              <th style="width: 25%;">Address</th>
              <th style="width: 15%;">Position / Status</th>
              <th style="width: 20%;">Reason for Leaving/Dismissal</th>
              </tr>
            </thead>
            <tbody formArrayName="employs">
              <tr *ngFor="let employ of employs.controls; let i = index" [formGroupName]="i">
              <td><input class="form-control" type="text" formControlName="patientEPeriodDate"  name="employmentEpd" placeholder="Enter Period Date" required></td>
              <td><input class="form-control" type="text" formControlName="patientNameofCompany" name="employmentNca" placeholder="Enter Company Name" required></td>
              <td><input class="form-control" type="text" formControlName="patientCompanyAddress" name="employmentAddr" placeholder="Enter Address" required></td>
              <td><input class="form-control" type="text" formControlName="patientCompanyPosition" name="employmentPos" placeholder="Enter Position" required></td>
              <td><input class="form-control" type="text" formControlName="patientReasonforLeaving" name="employmentReason" placeholder="Enter Reason" required></td>
              <td hidden style="width: 15%;"><input class="form-control" type="text" formControlName="employmentCode" ></td>
            </tr>
            </tbody>
            </table>
            <button type="button" class="btn btn-secondary mt-3" (click)="employmentsaddRow()">Add Row</button>
          </div>
          </div>
          <hr>
          <div class="mt-4">
          <button type="submit" class="btn btn-primary text-white me-2">Save changes</button>
          <button type="reset" class="btn btn-outline-secondary">Cancel</button>
          </div>
        </form>
        </div>
      </div>
        <div class="card-footer text-end">
        <button type="button" class="btn btn-secondary text-white me-2" (click)="goToSubstanceHisto()">
          Next
        </button>
        </div>
      </div>
    </div>
    <div class="tab-pane fade hide" id="SubstanceHisto" role="tabpanel">
      <div class="nav-align-top nav-tabs-shadow mb-6">
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item active show" role="presentation">
            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#navDrugHistory" role="tab" aria-selected="true">
              Drug History
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#navReason" role="tab" aria-selected="false">
              Reason for Using Drugs
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#navDrugEffects" role="tab" aria-selected="false">
              Drug Effects
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#navRehabRecord" role="tab" aria-selected="false">
              Rehabilitation Record
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#navPersonalHealth" role="tab" aria-selected="false">
              Personal Health History
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#navFamilyHealth" role="tab" aria-selected="false">
              Family Health Record
            </button>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane fade active show" id="navDrugHistory" role="tabpanel">
            <!-- Drug History Content -->
            <div class="card mb-5">
              <div class="card-header">
                <h4 class="card-header-title">Drug History</h4>
                <hr>
              </div>
              <div class="card-body pt-4">
                <form id="DrugHistoryForm">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-12">
                        <table class="table table-bordered">
                          <thead>
                            <tr>
                              <th>Drug / Chem</th>
                              <th>Date Started</th>
                              <th>Latest Use</th>
                              <th>Usual Dose</th>
                              <th>Highest Dose</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let drughistory of drugHistories">
                              <td><input class="form-control" type="text" [(ngModel)]="drughistory.dc" name="drughistoryDc" placeholder="Enter Drug Name" required></td>
                              <td><input class="form-control" type="text" [(ngModel)]="drughistory.ds" name="drughistoryDs" placeholder="Date Started" required></td>
                              <td><input class="form-control" type="text" [(ngModel)]="drughistory.lu" name="drughistoryLu" placeholder="Latest Use" required></td>
                              <td><input class="form-control" type="text" [(ngModel)]="drughistory.udq" name="drughistoryUdq" placeholder="Usual Dose" required></td>
                              <td><input class="form-control" type="text" [(ngModel)]="drughistory.hd" name="drughistoryHd" placeholder="Highest Dose" required></td>
                            </tr>
                          </tbody>
                        </table>
                        <br>
                        <button type="button" class="btn btn-secondary" (click)="drughistoriessaddRow()">Add Row</button>
                      </div>
                    </div>
                  
                  </div>
                  <hr>
                  <div class="mt-6">
                    <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                </form>
              </div>
            </div>
              <div class="card-footer text-end">
              <button type="button" class="btn btn-secondary text-white me-2" (click)="gotoNavReason()">
                        Next
              </button>
              </div>
          </div>
          <div class="tab-pane fade" id="navReason" role="tabpanel">
            <!-- Reason for Using Drugs Content -->
            <div class="card mb-5">
              <div class="card-header">
                <h4 class="card-header-title">Reason for Using Drugs</h4>
              </div>
              <div class="card-body pt-4">
                <form id="ReasonForm">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-12">
                        <label for="reason" class="form-label">Reason for using Drugs?</label>
                        <input type="text" class="form-control" id="reason" name="reason" placeholder="Enter Reason">
                      </div>
                      <div class="col-md-12">
                        <label for="support" class="form-label">How do you support your vices?</label>
                        <input type="text" class="form-control" id="support" name="support" placeholder="Enter Support Method">
                      </div>
                    </div>
                  </div>
                  <hr>
                  <div class="mt-6">
                    <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                </form>
              </div>
            </div>
            <div class="card-footer text-end">
              <button type="button" class="btn btn-secondary text-white me-2" (click)="gotoNavDrugEffects()">
                        Next
              </button>
              </div>
          </div>
          <div class="tab-pane fade" id="navDrugEffects" role="tabpanel">
            <!-- Drug Effects Content -->
            <div class="card mb-5">
              <div class="card-header">
                <h4 class="card-header-title">Drug Effects</h4>
              </div>
              <div class="card-body pt-4">
                <form id="drugEffectForm">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-12">
                        <label for="effects" class="form-label">Unwanted effects of use/abuse (please check whatever is applicable)</label>
                        <div class="row">
                          <div *ngFor="let x of drugEffects" class="form-check mb-0 ms-2 col-md-2">
                            <input class="form-check-input" type="checkbox" [value]="x.drugEffectCode" (change)="onCheckboxChange($event, x)">
                            {{ x.drugEffectDesc }}
                          </div>
                        </div>
                        <div class="col-md-12">
                          <label for="otherEffects" class="form-label">Other bad effects/Experience</label>
                          <input type="text" class="form-control" id="otherEffects" name="otherEffects" placeholder="Enter Other Effects">
                        </div>
                      </div>
                    </div>
                  </div>
                  <hr>
                  <div class="mt-6">
                    <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                </form>
              </div>
            </div>
            <div class="card-footer text-end">
              <button type="button" class="btn btn-secondary text-white me-2" (click)="gotoNavRehabRecord()">
                        Next
              </button>
              </div>
          </div>
          <div class="tab-pane fade" id="navRehabRecord" role="tabpanel">
            <!-- Rehabilitation Record Content -->
            <div class="card mb-5">
              <div class="card-header">
                <h4 class="card-header-title">Rehabilitation Record</h4>
              </div>
              <div class="card-body pt-4">
                <form id="PrevRehabForm">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-12">
                        <table class="table table-bordered">
                          <thead>
                            <tr>
                              <th>Period</th>
                              <th>Rehabilitation Center</th>
                              <th>What Happened? Explain</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let prevRehab of PrevRehab">
                              <td><input class="form-control" type="text" [(ngModel)]="prevRehab.pr" name="prevRehabPr" placeholder="Enter Period" required></td>
                              <td><input class="form-control" type="text" [(ngModel)]="prevRehab.rc" name="prevRehabRc" placeholder="Enter Center" required></td>
                              <td><input class="form-control" type="text" [(ngModel)]="prevRehab.whe" name="prevRehabWhe" placeholder="Explain" required></td>
                            </tr>
                          </tbody>
                        </table>
                        <br>
                        <button type="button" class="btn btn-secondary" (click)="PrevRehabaddRow()">Add Row</button>
                      </div>
                    </div>
                  </div>
                  <hr>
                  <div class="mt-6">
                    <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                </form>
              </div>
            </div>
            <div class="card-footer text-end">
              <button type="button" class="btn btn-secondary text-white me-2" (click)="gotoNavPersonalHealth()">
                        Next
              </button>
              </div>
          </div>
          <div class="tab-pane fade" id="navPersonalHealth" role="tabpanel">
            <!-- Personal Health History Content -->
            <div class="card mb-5">
              <div class="card-header">
                <h4 class="card-header-title">Personal Health History</h4>
              </div>
              <div class="card-body pt-4">
                <form id="PersonalHealthForm">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-12">
                        <label for="personalHealth" class="form-label">Personal Health History</label>
                        <input type="text" class="form-control" id="personalHealth" name="personalHealth" placeholder="Enter Personal Health History">
                      </div>
                    </div>
                  </div>
                  <hr>
                  <div class="mt-6">
                    <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                </form>
              </div>
            </div>
            <div class="card-footer text-end">
              <button type="button" class="btn btn-secondary text-white me-2" (click)="gotoNavFamilyHealth()">
                        Next
              </button>
              </div>
          </div>
          <div class="tab-pane fade" id="navFamilyHealth" role="tabpanel">
            <!-- Family Health Record Content -->
            <div class="card mb-5">
              <div class="card-header">
                <h4 class="card-header-title">Family Health Record</h4>
              </div>
              <div class="card-body pt-4">
                <form id="FamHealthHistoryForm">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-12">
                        <table class="table table-bordered">
                          <thead>
                            <tr>
                              <th>Name</th>
                              <th>Blood Pressure</th>
                              <th>Height</th>
                              <th>Weight</th>
                              <th>RR</th>
                              <th>CR</th>
                              <th>Tattoo Marks/Scars</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr *ngFor="let FamHealthHistory of FamHealthHistories">
                              <td><input class="form-control" type="text" [(ngModel)]="FamHealthHistory.n" name="FamHealthHistoryN" placeholder="Enter Name" required></td>
                              <td><input class="form-control" type="text" [(ngModel)]="FamHealthHistory.bp" name="FamHealthHistoryBp" placeholder="Enter BP" required></td>
                              <td><input class="form-control" type="text" [(ngModel)]="FamHealthHistory.h" name="FamHealthHistoryH" placeholder="Enter Height" required></td>
                              <td><input class="form-control" type="text" [(ngModel)]="FamHealthHistory.w" name="FamHealthHistoryW" placeholder="Enter Weight" required></td>
                              <td><input class="form-control" type="text" [(ngModel)]="FamHealthHistory.rr" name="FamHealthHistoryRR" placeholder="Enter RR" required></td>
                              <td><input class="form-control" type="text" [(ngModel)]="FamHealthHistory.cr" name="FamHealthHistoryCR" placeholder="Enter CR" required></td>
                              <td><input class="form-control" type="text" [(ngModel)]="FamHealthHistory.tms" name="FamHealthHistoryTms" placeholder="Enter Marks/Scars" required></td>
                            </tr>
                          </tbody>
                        </table>
                        <br>
                        <button type="button" class="btn btn-secondary" (click)="FamHealthHistoriesaddRow()">Add Row</button>
                      </div>
                    </div>
                  </div>
                  <hr>
                  <div class="mt-6">
                    <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                </form>
              </div>
            </div>
            <div class="card-footer text-end">
              <button type="button" class="btn btn-secondary text-white me-2" (click)="gotoAppHisto()">
                        Next
              </button>
              </div>
          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane fade hide" id="ApplicationHisto" role="tabpanel">
      <div class="row">

        <!-- Left Side: Staff's Assessment Card -->
        <div class="col-md-7">
          <div class="card mb-5">
            <div class="card-header">
              <h4 class="card-header-title">Staff's Assessment</h4>
              <hr>
            </div>
            <div class="card-body pt-4">
              <form id="AssessmentForm">
                <div class="row g-4">
                  <div class="row">
                    <div class="row">
                      <div *ngFor="let x of admissionType" style="font-size: 10px;" class="form-check mb-0 ms-2 col-md-2">
                        <input class="form-check-input" type="checkbox" [value]="x.admissionCode"
                          (change)="onAdmissionTypeCheckboxChange($event, x)">
                        {{ x.admissionDesc }}
                      </div>
                    </div>

                    <div class="col-md-12">
                      <label for="yrGrad" class="form-label">Assessment</label>
                      <input type="text" class="form-control" id="yrGrad" name="yrGrad" placeholder="Enter">
                    </div>

                    <div class="col-md-12">
                      <label for="yrGrad" class="form-label">Plan</label>
                      <input type="text" class="form-control" id="yrGrad" name="yrGrad" placeholder="Enter">
                    </div>
                    <div class="col-md-12">
                      <label for="appDate" class="form-label">Application Date</label>
                      <input type="date" class="form-control"  placeholder="Enter Date">
                    </div>
                    <div class="divider text-end">
                      <div style="text-decoration: underline;">Prepared By:</div>
                    </div>
                    <div class="divider text-end">
                      <div>{{ userInfo.name }}</div>
                    </div>

                  </div>
                </div>
                <hr>
                <div class="mt-6">
                  <button type="submit" class="btn btn-primary me-3 text-white">Save changes</button>
                  <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <!-- Right Side: New Card -->
        <div class="col-md-5">
          <div class="card">
            <div class="card-header">
              <h4 class="card-header-title">Application History</h4>
            </div>
            <div class="card-body" style="height: 400px; overflow-y: auto;">
              <div class="table-responsive" style="max-height: 350px; overflow-y: auto;">
                <table class="table table-bordered table-striped table-hover">
                  <thead class="table-dark text-center">
                    <tr >
                      <th style="width: 5%;">#</th>
                      <th style="width: 50%;">Date</th>
                      <th style="width: 20%;">Type</th>
                      <th style="width: 20%;">Status</th>
                      <th style="width: 5%;">Action</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td class="text-center">1</td>
                      <td>2024-01-19</td>
                      <td>Inpatient</td>
                      <td>Completed</td>
                      <td class="text-center">
                        <button type="button" class="btn btn-sm btn-primary text-white" title="View Details" (click)="goToPatientDashboard()">
                          <i class="bx bx-show"></i> <!-- Eye Icon -->
                        </button>
                      </td>
                    </tr>

                    <tr>
                      <td class="text-center">2</td>
                      <td>2024-06-10</td>
                      <td>Oupatient</td>
                      <td>Incomplete</td>
                      <td class="text-center">
                        <button type="button" class="btn btn-sm btn-primary text-white" title="View Details" (click)="goToPatientDashboard()">
                          <i class="bx bx-show"></i> <!-- Eye Icon -->
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

          </div>
        </div>



      </div>
    </div>

    </div>



</div>
