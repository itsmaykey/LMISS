<div class="row">
  <div class="col-md-12">
          <div class="nav-align-bottom">
            <ul class="nav nav-pills flex-column flex-md-row custom-nav">
              <li class="nav-item">
                <a class="nav-link active" data-bs-toggle="tab" data-bs-target="#Account" role="tab" aria-selected="true">
                  <i class="bx bx-sm bx-user me-1"></i> Account
                </a>
              </li>
              <li class="nav-item" *ngIf="ExistedPatientCode !== null && ExistedPatientCode !== undefined && ExistedPatientCode !== ''">
                <a class="nav-link" data-bs-toggle="tab" data-bs-target="#EducationalAttain" role="tab" aria-selected="false">
                    <i class="bx bx-sm bx-book-open me-1"></i> Educational Attainment
                </a>
            </li>
            <li class="nav-item" *ngIf="ExistedPatientCode !== null && ExistedPatientCode !== undefined && ExistedPatientCode !== ''">
                <a class="nav-link" data-bs-toggle="tab" data-bs-target="#FamHistory" role="tab" aria-selected="false">
                    <i class="bx bx-sm bx-group me-1"></i> Family History
                </a>
            </li>
            <li class="nav-item" *ngIf="ExistedPatientCode !== null && ExistedPatientCode !== undefined && ExistedPatientCode !== ''">
              <a class="nav-link" data-bs-toggle="tab" data-bs-target="#EmployHisto" role="tab" aria-selected="false">
                  <i class="bx bx-sm bx-briefcase me-1"></i> Employment History
              </a>
          </li>
          <li class="nav-item" *ngIf="ExistedPatientCode !== null && ExistedPatientCode !== undefined && ExistedPatientCode !== ''">
            <a class="nav-link" data-bs-toggle="tab" data-bs-target="#SubstanceHisto" role="tab" aria-selected="false">
                <i class="bx bx-sm bx-capsule me-1"></i> Substance Use History
            </a>
        </li>
        <li class="nav-item" *ngIf="ExistedPatientCode !== null && ExistedPatientCode !== undefined && ExistedPatientCode !== ''">
          <a class="nav-link" data-bs-toggle="tab" data-bs-target="#ApplicationHisto" role="tab" aria-selected="false">
            <i class="bx bx-sm bx-task me-1"></i> Application
          </a>
        </li>
            </ul>
          </div>
          <div class="tab-content custom-tab-content">
            <div class="tab-pane fade active show" id="Account" role="tabpanel">
          <!-- //Basic Data -->
          <div class="card mb-5">
            <!-- Account -->
            <div class="card-header">
              <h4 class="card-header-title">Personal Info</h4>
              <hr>
            </div>

            <div class="card-body pt-4">
              <div *ngIf="patientForm" >
                <form [formGroup]="patientForm"(ngSubmit)="patientFormSubmit()">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-3" hidden>
                        <label for="lname" class="form-label">Patient Code</label>
                        <input class="form-control" type="text" formControlName="patientCode" placeholder="Enter Last Name">
                      </div>
                      <div class="col-md-3">
                        <label for="lname" class="form-label">Last Name</label>
                        <input class="form-control" type="text" formControlName="pLastName" placeholder="Enter Last Name">
                      </div>
                      <div class="col-md-4">
                        <label for="fName" class="form-label">First Name</label>
                        <input class="form-control" type="text" formControlName="pFirstName" placeholder="Enter First Name">
                      </div>
                      <div class="col-md-3">
                        <label for="Mname" class="form-label">Middle Name</label>
                        <input class="form-control" type="text" formControlName="pMiddleName" placeholder="Enter Middle Name">
                      </div>
                      <div class="col-md-2">
                        <label for="Mname" class="form-label">Extn. Name</label>
                        <input class="form-control" type="text" formControlName="pExtName" placeholder="Enter Extn Name">
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-2">
                        <label for="birthdate" class="form-label">BirthDate</label>
                        <input type="date" class="form-control" formControlName="birthdate" placeholder="Enter Birthdate">
                      </div>

                      <div class="col-md-2">
                        <label for="bPalce" class="form-label">Birth Place</label>
                        <input type="text" class="form-control" formControlName="birthplace" placeholder="Enter Birth Place">

                      </div>
                      <div class="col-md-2">
                        <label for="sex" class="form-label">Sex</label>
                        <select formControlName="sex" class="select2 form-select">
                          <option value="" selected disabled>Select</option>
                          <option value=1>Male</option>
                          <option value=2>Female</option>
                        </select>
                      </div>
                      <div class="col-md-2">
                        <label for="civilStatusId" class="form-label">Civil Status</label>
                        <select formControlName="civilStatusId" class="select2 form-select">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let x of civilStatus" [value]="x.civId">{{x.civName}}</option>
                        </select>
                      </div>
                      <div class="col-md-3">
                        <label class="form-label" for="phoneNumber">Contact Number</label>
                        <div class="input-group input-group-merge">
                          <input type="text" formControlName="phoneNumber" class="form-control" placeholder="09xx xxx xxxx" maxlength="11">
                        </div>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-4">
                        <label for="mun" class="form-label">Municipality</label>
                        <select class="select2 form-select" formControlName="citymunCode"  (change)="onMunicipalityChange($event)">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let x of citymun" [value]="x.citymunCode">{{x.citymunDesc}}</option>
                        </select>
                      </div>
                      <div class="col-md-4">
                        <label for="brgy" class="form-label">Barangay</label>
                        <select class="select2 form-select" formControlName="brgyCode" (change)="onBarangayChange($event)">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let x of brgy" [value]="x.brgyCode">{{x.brgyDesc}}</option>
                        </select>
                      </div>
                      <div class="col-md-4">
                        <label for="prkCode" class="form-label">Purok</label>
                        <select class="select2 form-select" formControlName="prkCode">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let x of prk" [value]="x.prkCode">{{x.prkDesc}}</option>
                        </select>
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-3">
                        <label for="nickname" class="form-label">Nickname</label>
                        <input type="text" class="form-control" formControlName="pNickName" placeholder="Enter nickname">
                      </div>
                      <div class="col-md-3">
                        <label for="nationalityId" class="form-label">Nationality</label>
                        <select class="select2 form-select" formControlName="nationalityId">
                          <option value="" selected disabled>Select</option>
                          <option *ngFor="let x of nationality" [value]="x.citiId">{{x.cityDescription}}</option>
                        </select>
                      </div>
                      <div class="col-md-3">
                        <label for="religionId" class="form-label">Religion</label>
                        <select class="select2 form-select" formControlName="religionId">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let x of religion" [value]="x.recNo">{{x.religionDesc}}</option>
                        </select>
                      </div>
                      <div class="col-md-3">
                        <label for="Occupation" class="form-label">Occupation</label>
                        <input type="text" class="form-control" formControlName="occupation" placeholder="Enter Occupation">
                      </div>
                    </div>
                    <div class="row">
                      <div class="col-md-3">
                        <label for="educationalId" class="form-label">Educational Attainment</label>
                        <select class="select2 form-select" formControlName="educationalId">
                          <option value="" disabled selected>Select</option>
                          <option *ngFor="let x of educationalAttainment" [value]="x.eduId">{{x.eduName}}</option>
                        </select>
                      </div>
                      <div class="col-md-2">
                        <label for="schoolLastAttended" class="form-label">Sch. Last Attended</label>
                        <input class="form-control" type="date" formControlName="schoolLastAttended">
                      </div>
                      <div class="col-md-2">
                        <label for="yearGraduated" class="form-label">Yr. Graduated</label>
                        <input type="number" class="form-control" formControlName="yearGraduated" placeholder="Enter Year">
                      </div>
                      <div class="col-md-3">
                        <label for="income" class="form-label">Income</label>
                        <input class="form-control" type="number" formControlName="income" placeholder="Enter Amount">
                      </div>
                    </div>
                    <hr>
                    <div class="mt-6">
                      <button type="submit" class="btn btn-primary me-3 text-white"  [disabled]="isSubmitting">Save changes</button>
                      <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                    </div>

                  </div>
                </form>
              </div>

              <div class="card-footer text-end" *ngIf="ExistedPatientCode !== null && ExistedPatientCode !== undefined && ExistedPatientCode !== ''">
                <button type="button" class="btn btn-secondary text-white me-2" (click)="goToEducational()">
                    Next
                </button>

            </div>
            </div>
            <!-- /Account -->
          </div>
    </div>

    <div class="tab-pane fade hide" id="EducationalAttain" role="tabpanel">
        <div class="card mb-5">
          <div class="card-header">
            <h4 class="card-header-title">Educational Attainment</h4>
            <hr>
          </div>
<div *ngIf="patientSchoolForm">
  <form [formGroup]="patientSchoolForm"  (ngSubmit)="patientSchoolFormSubmit()">

    <div class="card-body pt-4">
        <div class="row g-4">
         <div class="row">
          <div class="col-md-9" hidden>
            <label  class="form-label">Elementary School</label>
            <input class="form-control" type="text" formControlName="patientCode" placeholder="Patient Code">
          </div>

          <div class="col-md-9">
            <label  class="form-label">Elementary School </label>
            <input class="form-control" type="text" formControlName="patientElementarySchool"  placeholder="Elementary School Name" >
          </div>
          <div class="col-md-2">
            <label for="bdate" class="form-label">Sch. Last Attended</label>
            <input class="form-control" type="date" formControlName="patientElementaryYear">
          </div>
          <div class="col-md-12">
            <label for="lname" class="form-label">School Address</label>
            <input class="form-control" type="text" formControlName="patientElementaryAddress" placeholder="Elementary School Address" >
          </div>
        </div>
        <div class="row">
          <div class="col-md-9">
            <label for="lname" class="form-label">High School</label>
            <input class="form-control" type="text" formControlName="patientHighScool" placeholder="High School Name" >
          </div>
          <div class="col-md-2">
            <label for="bdate" class="form-label">Sch. Last Attended</label>
            <input class="form-control" type="date" formControlName="patientHighSchoolYear" >
          </div>
          <div class="col-md-12">
            <label for="lname" class="form-label">School Address</label>
            <input class="form-control" type="text" formControlName="patientHighSchoolAddress" placeholder="High School Address" >
          </div>
        </div>
        <div class="row">
          <div class="col-md-12">
            <label for="lname" class="form-label">College School</label>
            <input class="form-control" type="text" formControlName="patientCollegeSchool" placeholder="College School Name" >
          </div>
          <div class="col-md-12">
            <label for="lname" class="form-label">Course</label>
            <input class="form-control" type="text" formControlName="patientCollegeCourse" placeholder="Course" >
          </div>
          <div class="col-md-12">
            <label for="lname" class="form-label">College School Address</label>
            <input class="form-control" type="text" formControlName="patientColleegeAddress" placeholder="College School Address" >
          </div>
        </div>

        </div>
        <hr>
        <div class="mt-6">
          <button type="submit" class="btn btn-primary me-3 text-white"  [disabled]="isSubmitting">Save changes</button>
          <button type="reset" class="btn btn-outline-secondary">Cancel</button>
        </div>
    </div>

</form>
</div>

      <div class="card-footer text-end">
        <button type="button" class="btn btn-secondary text-white me-2" (click)="goToFamHisto()">
            Next
        </button>
    </div>
  </div>
    </div>
    <div class="tab-pane fade" id="FamHistory" role="tabpanel">
      <div class="nav-align-top nav-tabs-shadow mb-6">
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item active show" role="presentation">
            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#navsParent" role="tab" aria-selected="false">
              Parent
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button type="button" class="nav-link" role="tab" data-bs-toggle="tab" data-bs-target="#navSpouse" aria-controls="navs-top-profile" aria-selected="false" tabindex="-1">
              Spouse
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button type="button" class="nav-link" role="tab" data-bs-toggle="tab" data-bs-target="#navSiblings" aria-controls="navs-top-messages" aria-selected="false" tabindex="-1">
              Siblings
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button type="button" class="nav-link" role="tab" data-bs-toggle="tab" data-bs-target="#navChild" aria-controls="navs-top-Children" aria-selected="false" tabindex="-1">
              Children
            </button>
          </li>
        </ul>
        <div class="tab-content">
          <div class="tab-pane fade active show" id="navsParent" role="tabpanel">
            <div *ngIf="patientParentForm" >
              <form [formGroup]="patientParentForm" (ngSubmit)="patientParentFormSubmit()">
            <div class="card-body pt-4">
              <div class="row g-4">
                <div class="row">
                  <div class="col-md-3" hidden>
                    <label for="lname" class="form-label">Patient Code</label>
                    <input class="form-control" type="text" formControlName="patientCode">
                  </div>
                  <div class="col-md-6">
                    <label for="fatherName" class="form-label">Father</label>
                    <input class="form-control" type="text" formControlName="fatherName" placeholder="Enter Full Name">
                  </div>
                  <div class="col-md-6">
                    <label for="motherName" class="form-label">Mother</label>
                    <input class="form-control" type="text"formControlName="motherName" placeholder="Enter Full Name">
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-6">
                    <label for="fatherAddress" class="form-label">Father's Address</label>
                    <input class="form-control" type="text" id="fatherAddress" formControlName="fatherAddress" placeholder="Enter Address">
                  </div>
                  <div class="col-md-6">
                    <label for="motherAddress" class="form-label">Mother's Address</label>
                    <input class="form-control" type="text" id="motherAddress" formControlName="motherAddress" placeholder="Enter Address">
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-4">
                    <label for="fatherEducation" class="form-label">Father's Education</label>
                    <input class="form-control" type="text" id="fatherEducation" formControlName="fatherEducation" placeholder="Enter Education">
                  </div>
                  <div class="col-md-2">
                    <label for="fatherStatus" class="form-label">Living Arrangement</label>
                    <select id="fatherStatus" class="form-select" formControlName="fatherStatusId">
                      <option value="" disabled selected>Select</option>
                      <option *ngFor="let x of civilStatus" [value]="x.civId">{{x.civName}}</option>
                    </select>
                  </div>
                  <div class="col-md-4">
                    <label for="motherEducation" class="form-label">Mother's Education</label>
                    <input class="form-control" type="text" id="motherEducation" formControlName="motherEducation" placeholder="Enter Education">
                  </div>
                  <div class="col-md-2">
                    <label for="motherStatus" class="form-label">Living Arrangement</label>
                    <select id="motherStatus" class="form-select" formControlName="motherStatusId">
                      <option value="" disabled selected>Select</option>
                      <option *ngFor="let x of civilStatus" [value]="x.civId">{{ x.civName }}</option>
                    </select>
                  </div>
                </div>

                <div class="row">
                  <div class="col-md-4">
                    <label for="fatherOccupation" class="form-label">Father's Occupation</label>
                    <input class="form-control" type="text" id="fatherOccupation" formControlName="fatherOccupation" placeholder="Enter Occupation">
                  </div>
                  <div class="col-md-2">
                    <label for="fatherIncome" class="form-label">Father's Income</label>
                    <input class="form-control" type="number" id="fatherIncome" formControlName="fatherIncome" placeholder="Enter Income">
                  </div>
                  <div class="col-md-4">
                    <label for="motherOccupation" class="form-label">Mother's Occupation</label>
                    <input class="form-control" type="text" id="motherOccupation" formControlName="motherOccupation" placeholder="Enter Occupation">
                  </div>
                  <div class="col-md-2">
                    <label for="motherIncome" class="form-label">Mother's Income</label>
                    <input class="form-control" type="number" id="motherIncome" formControlName="motherIncome" placeholder="Enter Income">
                  </div>
                </div>

              </div>

              <hr>
              <div class="mt-6">
                <button type="submit" class="btn btn-primary me-3 text-white"  [disabled]="isSubmitting">Save changes</button>
                <button type="reset" class="btn btn-outline-secondary">Cancel</button>
              </div>
              <div class="card-footer text-end">
                <button type="button" class="btn btn-secondary text-white me-2" (click)="goToSpouse()">
                    Next
                </button>
            </div>
            </div>

              </form>
          </div>
        </div>

          <div class="tab-pane fade" id="navSpouse" role="tabpanel">
            <div *ngIf="patientSpouseForm" >
              <form [formGroup]="patientSpouseForm" (ngSubmit)="patientSpouseFormSubmit()">
            <div class="card-body pt-4">
              <div class="col-md-3" hidden>
                <label for="lname" class="form-label">Patient Code</label>
                <input class="form-control" type="text" formControlName="patientCode">
              </div>
              <div class="row g-4">
                   <div class="row">
                <div class="col-md-8">
                  <label for="lname" class="form-label">Spouse Name</label>
                  <input class="form-control" type="text" name="lname" formControlName="spouseName" id="lname" placeholder="Enter Full Name" >
                </div>
                <div class="col-md-3">
                  <label for="Nick" class="form-label">Nickname</label>
                  <input class="form-control" type="text" name="Nick" formControlName="spouseNickName" id="Nick" placeholder="Enter Nick Name" >
                </div>
                <div class="col-md-1">
                  <label for="Age" class="form-label">Age</label>
                  <input class="form-control" type="text" name="Age" formControlName="spouseAge" id="Age" placeholder="Age" >
                </div>
              </div>
              <div class="row">
                <div class="col-md-12">
                  <label for="Address" class="form-label">Address</label>
                  <input class="form-control" type="text" name="Address" formControlName="spouseAddress" id="Address" placeholder="Enter Address" >
                </div>
              </div>
              <div class="row">
                <div class="col-md-4">
                  <label for="Occupation" class="form-label">Occupation</label>
                  <input class="form-control" type="text" name="Occupation" formControlName="spouseOccupation" id="Occupation" placeholder="Enter Occupation" >
                </div>
                <div class="col-md-8">
                  <label for="Employer" class="form-label">Employer</label>
                  <input class="form-control" type="text" name="Employer" formControlName="spouseEmployer" id="Employer" placeholder="Enter Employer" >
                </div>
              </div>
              <div class="row">
                <div class="col-md-3">
                  <label for="spouseEduID" class="form-label">Educational Attainment</label>
                  <select class="select2 form-select" formControlName="spouseEduID">
                    <option value="" disabled selected>Select</option>
                    <option *ngFor="let x of educationalAttainment" [value]="x.edu_ID">{{x.edu_Name}}</option>
                  </select>
                </div>
                <div class="col-md-2">
                  <label for="Income" class="form-label">Income</label>
                  <input class="form-control" type="text" name="Income" formControlName="spouseIncome" id="Income" placeholder="Enter Income" >
                </div>
                <div class="col-md-2">
                  <label for="language" class="form-label">Living Arrangement</label>
                  <select id="language" class="select2 form-select" formControlName="spouseLivingArrangement">
                    <option value="" disabled selected>Select</option>
                    <option  *ngFor="let x of civilStatus" value="{{x.civId}}">{{x.civName}}</option>
                  </select>
                </div>
              </div>

              </div>
              <hr>
              <div class="mt-6">
                <button type="submit" class="btn btn-primary me-3 text-white" [disabled]="isSubmitting">Save changes</button>
                <button type="reset" class="btn btn-outline-secondary">Cancel</button>
              </div>
              <div class="card-footer text-end">
                <button type="button" class="btn btn-secondary text-white me-2" (click)="goToSibs()">
                    Next
                </button>
            </div>
          </div>
      </form>
        </div>
          </div>
          <div class="tab-pane fade" id="navSiblings" role="tabpanel">
            <div *ngIf="patientSiblingsForm" >

            <form [formGroup]="patientSiblingsForm" (ngSubmit)="patientSiblingsFormSubmit()">
              <div class="card-body pt-4">
                <div class="row g-4">
                  <div class="row">
                    <div class="col-md-12">
                      <table class="table table-bordered" id="siblingsTable">
                        <thead>
                          <tr>
                            <th>Siblings Name</th>
                            <th>Birthdate</th>
                            <th>Sex</th>
                            <th>Civil<br>Status</th>
                            <th>Occupation</th>
                            <th>Educational<br>Attainment</th>
                            <th>Actions</th>
                          </tr>
                        </thead>
                        <tbody formArrayName="siblings">
                          <tr *ngFor="let sibling of siblings.controls; let i = index" [formGroupName]="i">

                            <td><input class="form-control" type="text" formControlName="siblingName" placeholder="Enter Last Name" required></td>
                            <td style="width: 8%;"> <input type="date" class="form-control" formControlName="siblingBirthDate" placeholder="Enter Birthdate"></td>
                            <td style="width: 10%;"><select class="select2 form-select" formControlName="siblingSexId">
                              <option value="" selected disabled>Select</option>
                              <option value=1>Male</option>
                              <option value=2>Female</option>
                            </select></td>
                            <td style="width: 10%;"><select class="select2 form-select" formControlName="siblingCivilStatusId">
                              <option value="" disabled selected>Select</option>
                              <option *ngFor="let x of civilStatus" [value]="x.civId">{{x.civName}}</option>
                            </select></td>
                            <td style="width: 15%;"><input class="form-control" type="text" formControlName="siblingOccupation" placeholder="Enter Occupation" required></td>
                            <td style="width: 15%;"><input class="form-control" type="text" formControlName="siblingEducationAttainment" placeholder="Enter Educational Attainment" required></td>
                            <td hidden style="width: 15%;"><input class="form-control" type="text" formControlName="siblingCode" ></td>
                            <td><button type="button" class="btn btn-danger" (click)="removeSibling(i)">Remove</button></td>
                          </tr>
                        </tbody>
                      </table>
                      <br>
                      <button type="button" class="btn btn-secondary" (click)="addSibling()">Add Row</button>
                    </div>
                  </div>
                </div>
                <hr>
                <div class="mt-6">
                  <button type="submit" class="btn btn-primary me-3 text-white" [disabled]="isSubmitting">Save changes</button>
                  <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                </div>
                <div class="card-footer text-end">
                  <button type="button" class="btn btn-secondary text-white me-2" (click)="goToChild()">
                    Next
                  </button>
                </div>
              </div>
            </form>
          </div>
        </div>
          <div class="tab-pane fade" id="navChild" role="tabpanel">
            <div *ngIf="patientChildrenForm" >

              <form [formGroup]="patientChildrenForm" (ngSubmit)="patientChildrenFormSubmit()">
                <div class="card-body pt-4">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-12">
                        <table class="table table-bordered" id="ChildrenTable">
                          <thead>
                            <tr>
                              <th>Children Name</th>
                              <th>Birthdate</th>
                              <th>Sex</th>
                              <th>Civil<br>Status</th>
                              <th>Occupation</th>
                              <th>Educational<br>Attainment</th>
                              <th>Actions</th>
                            </tr>
                          </thead>
                          <tbody formArrayName="childrens">
                            <tr *ngFor="let children of childrens.controls; let i = index" [formGroupName]="i">

                              <td><input class="form-control" type="text" formControlName="childName" placeholder="Enter Full Name" required></td>
                              <td style="width: 8%;"> <input type="date" class="form-control" formControlName="childBirthDate" placeholder="Enter Birthdate"></td>
                              <td style="width: 10%;"><select class="select2 form-select" formControlName="childSexId">
                                <option value="" selected disabled>Select</option>
                                <option value=1>Male</option>
                                <option value=2>Female</option>
                              </select></td>
                              <td style="width: 10%;"><select class="select2 form-select" formControlName="childCivilStatusId">
                                <option value="" disabled selected>Select</option>
                                <option *ngFor="let x of civilStatus" [value]="x.civId">{{x.civName}}</option>
                              </select></td>
                              <td style="width: 15%;"><input class="form-control" type="text" formControlName="childOccupation" placeholder="Enter Occupation" required></td>
                              <td style="width: 15%;"><input class="form-control" type="text" formControlName="childEducationAttainment" placeholder="Enter Educational Attainment" required></td>
                              <td hidden style="width: 15%;"><input class="form-control" type="text" formControlName="childrenCode" ></td>
                              <td><button type="button" class="btn btn-danger" (click)="removechildren(i)">Remove</button></td>
                            </tr>
                          </tbody>
                        </table>
                        <br>
                        <button type="button" class="btn btn-secondary" (click)="addchildren()">Add Row</button>
                      </div>
                    </div>
                  </div>
                  <hr>
                  <div class="mt-6">
                    <button type="submit" class="btn btn-primary me-3 text-white" [disabled]="isSubmitting">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                  <div class="card-footer text-end">
                    <button type="button" class="btn btn-secondary text-white me-2" (click)="goToEmploy()">
                      Next
                    </button>
                  </div>
                </div>
              </form>
            </div>

          </div>
        </div>
      </div>
    </div>
    <div class="tab-pane fade hide" id="EmployHisto" role="tabpanel">
      <div class="card">
      <div class="card-header">
        <h4 class="card-header-title">Employment Record</h4>
        <hr>
        </div>
        <div class="card-body">
          <div *ngIf="patientEmploymentForm" >
        <form [formGroup]="patientEmploymentForm" (ngSubmit)="patientEmployeeFormSubmit()" >
          <div class="row">
          <div class="col-md-12">
            <table class="table table-bordered">
            <thead>
              <tr>
              <th style="width: 15%;">Employment Period Date</th>
              <th style="width: 25%;">Name of Company/Agency</th>
              <th style="width: 25%;">Address</th>
              <th style="width: 15%;">Position / Status</th>
              <th style="width: 20%;">Reason for Leaving/Dismissal</th>
              </tr>
            </thead>
            <tbody formArrayName="employs">
              <tr *ngFor="let employ of employs.controls; let i = index" [formGroupName]="i">
              <td><input class="form-control" type="text" formControlName="patientEperiodDate"  name="employmentEpd" placeholder="Enter Period Date" required></td>
              <td><input class="form-control" type="text" formControlName="patientNameofCompany" name="employmentNca" placeholder="Enter Company Name" required></td>
              <td><input class="form-control" type="text" formControlName="patientCompanyAddress" name="employmentAddr" placeholder="Enter Address" required></td>
              <td><input class="form-control" type="text" formControlName="patientCompanyPosition" name="employmentPos" placeholder="Enter Position" required></td>
              <td><input class="form-control" type="text" formControlName="patientReasonforLeaving" name="employmentReason" placeholder="Enter Reason" required></td>
              <td hidden style="width: 15%;"><input class="form-control" type="text" formControlName="employmentCode" ></td>
            </tr>
            </tbody>
            </table>
            <button type="button" class="btn btn-secondary mt-3" (click)="employmentsaddRow()">Add Row</button>
          </div>
          </div>
          <hr>
          <div class="mt-4">
          <button type="submit" class="btn btn-primary text-white me-2" [disabled]="isSubmitting">Save changes</button>
          <button type="reset" class="btn btn-outline-secondary">Cancel</button>
          </div>
        </form>
        </div>
      </div>
        <div class="card-footer text-end">
        <button type="button" class="btn btn-secondary text-white me-2" (click)="goToSubstanceHisto()">
          Next
        </button>
        </div>
      </div>
    </div>

    <div class="tab-pane fade" id="SubstanceHisto" role="tabpanel">
      <div class="nav-align-top nav-tabs-shadow mb-6">
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item active show" role="presentation">
            <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#navDrugHistory" role="tab" aria-selected="true">
              Drug History
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#navReason" role="tab" aria-selected="false">
              Reason for Using Drugs
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#navDrugEffects" role="tab" aria-selected="false">
              Drug Effects
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#navRehabRecord" role="tab" aria-selected="false">
              Rehabilitation Record
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#navPersonalHealth" role="tab" aria-selected="false">
              Personal Health History
            </button>
          </li>
          <!-- <li class="nav-item" role="presentation">
            <button class="nav-link" data-bs-toggle="tab" data-bs-target="#navFamilyHealth" role="tab" aria-selected="false">
              Family Health Record
            </button>
          </li> -->
        </ul>
        <div class="tab-content">
          <div class="tab-pane fade active show" id="navDrugHistory" role="tabpanel">
          <div *ngIf="patientDrugHistoryForm">
            <form [formGroup]="patientDrugHistoryForm" (ngSubmit)="patientDrugHistoryFormSumit()">
              <div class="card mb-5">
                <div class="card-header">
                  <h4 class="card-header-title">Drug History</h4>
                  <hr>
                </div>
                <div class="card-body pt-4">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-12">
                        <table class="table table-bordered">
                          <thead>
                            <tr>
                              <th>Drug / Chem</th>
                              <th>Date Started</th>
                              <th>Latest Use</th>
                              <th>Usual Dose</th>
                              <th>Highest Dose</th>
                            </tr>
                          </thead>
                          <tbody formArrayName="drugHistorys">
                            <tr *ngFor="let drughistory of drugHistorys.controls; let i = index" [formGroupName]="i">
                              <td style="width: 15%;">
                                <select class="select2 form-select" formControlName="drugSubstanceId">
                                  <option value="" disabled selected>Select</option>
                                  <option *ngFor="let x of dSubstance" [value]="x.drugSubstanceId">{{x.drugSubstanceDesc}}</option>
                                </select>
                              </td>

                              <td style="width: 8%;">
                                <input type="date" class="form-control" formControlName="dateStarted" placeholder="Enter Date">
                              </td>
                              <td style="width: 8%;">
                                <input type="date" class="form-control" formControlName="latestUse" placeholder="Enter Date">
                              </td>
                              <td>
                                <input class="form-control" type="text" formControlName="dosageTaken" name="drughistoryUdq" placeholder="Usual Dose" required>
                              </td>
                              <td>
                                <input class="form-control" type="text" formControlName="highestDosageTaken" name="drughistoryHd" placeholder="Highest Dose" required>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                        <br>
                        <button type="button" class="btn btn-secondary" (click)="drughistoriessaddRow()">Add Row</button>
                      </div>
                    </div>
                  </div>
                  <hr>
                  <div class="mt-6">
                    <button type="submit" class="btn btn-primary me-3 text-white" [disabled]="isSubmitting">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                </div>
              </div>
            </form>
            <div class="card-footer text-end">
              <button type="button" class="btn btn-secondary text-white me-2" (click)="gotoNavReason()">
                Next
              </button>
            </div>
          </div>
      </div>
            <div class="tab-pane fade" id="navReason" role="tabpanel">
            <!-- Reason for Using Drugs Content -->
            <div class="card mb-5">
              <div class="card-header">
              <h4 class="card-header-title">Reason for Using Drugs</h4>
              </div>
              <div class="card-body pt-4">
              <div *ngIf="patientDrugReasonForm">
                  <form [formGroup]="patientDrugReasonForm"  (ngSubmit)="patientDrugReasonFormSubmit()">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-3" hidden>
                        <label for="lname" class="form-label">Patient Code</label>
                        <input class="form-control" type="text" formControlName="patientCode" placeholder="Enter Last Name">
                      </div>
                      <div class="col-md-12">
                        <label for="reason" class="form-label">Reason for using Drugs?</label>
                        <input type="text" class="form-control" formControlName="reasonForUsingDrugs" id="reason" name="reason" placeholder="Enter Reason">
                      </div>
                      <div class="col-md-12">
                        <label for="support" class="form-label">How do you support your vices?</label>
                        <input type="text" class="form-control" formControlName="patientSupportVices" id="support" name="support" placeholder="Enter Support Method">
                      </div>
                    </div>
                  </div>
                  <hr>
                  <div class="mt-6">
                    <button type="submit" class="btn btn-primary me-3 text-white" [disabled]="isSubmitting">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                </form>
              </div>
            </div>
            </div>
            <div class="card-footer text-end">
              <button type="button" class="btn btn-secondary text-white me-2" (click)="gotoNavDrugEffects()">
                Next
              </button>
            </div>
          </div>

          <div class="tab-pane fade" id="navDrugEffects" role="tabpanel">
            <!-- Drug Effects Content -->
            <div class="card mb-5">
              <div class="card-header">
                <h4 class="card-header-title">Drug Effects</h4>
              </div>
              <div class="card-body pt-4">
                <div *ngIf="patientDrugEffectForm">
                  <form [formGroup]="patientDrugEffectForm"  (ngSubmit)="patientDrugEffectFormSubmit()">

                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-12">
                        <label for="effects" class="form-label">Unwanted effects of use/abuse (please check whatever is applicable)</label>
                        <div class="row">
                          <div formArrayName="drugEffectCode" class="row">
                            <div *ngFor="let x of drugEffects; let i = index" class="form-check mb-0 ms-2 col-md-2">
                              <input
                              class="form-check-input"
                              type="checkbox"
                              [value]="x.drugEffectCode"
                              [checked]="(patientDrugEffectForm.get('drugEffectCode')?.value || []).includes(x.drugEffectCode)"
                              (change)="onCheckboxChange($event, x, patientDrugEffectForm)">
                              {{ x.drugEffectDesc }}
                            </div>
                          </div>


                        </div>
                        <div class="col-md-12">
                          <label for="otherEffects" class="form-label">Other bad effects/Experience</label>
                          <input type="text" class="form-control" id="otherEffects" formControlName="drugOtherEffects"  name="otherEffects" placeholder="Enter Other Effects">
                        </div>
                      </div>
                    </div>
                  </div>
                  <hr>
                  <div class="mt-6">
                    <button type="submit" class="btn btn-primary me-3 text-white" [disabled]="isSubmitting">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                </form>
            </div>
          </div>
        </div>
            <div class="card-footer text-end">
              <button type="button" class="btn btn-secondary text-white me-2" (click)="gotoNavRehabRecord()">
                Next
              </button>
            </div>
          </div>

            <div class="tab-pane fade" id="navRehabRecord" role="tabpanel">
            <div *ngIf="patientRehabRecordForm">
              <form [formGroup]="patientRehabRecordForm" (ngSubmit)="patientRehabRecordFormSubmit()">
              <div class="card mb-5">
                <div class="card-header">
                <h4 class="card-header-title">Rehabilitation Record</h4>
                </div>
                <div class="card-body pt-4">
                <div class="row g-4">
                  <div class="row">
                  <div class="col-md-12">
                    <table class="table table-bordered">
                    <thead>
                      <tr>
                      <th>Period</th>
                      <th>Rehabilitation Center</th>
                      <th>What Happened? Explain</th>
                      </tr>
                    </thead>
                    <tbody formArrayName="rehabRecords">
                      <tr *ngFor="let rehabRecord of rehabRecords.controls; let i = index" [formGroupName]="i">
                      <td>
                        <input class="form-control" type="text" formControlName="rehabilitationPeriod" placeholder="Enter Period" required>
                      </td>
                      <td>
                        <input class="form-control" type="text" formControlName="rehabilitationCenter" placeholder="Enter Center" required>
                      </td>
                      <td>
                        <input class="form-control" type="text" formControlName="patientReason" placeholder="Explain" required>
                      </td>
                      </tr>
                    </tbody>
                    </table>
                    <br>
                    <button type="button" class="btn btn-secondary" (click)="addRehabRecord()">Add Row</button>
                  </div>
                  </div>
                </div>
                <hr>
                <div class="mt-6">
                  <button type="submit" class="btn btn-primary me-3 text-white" [disabled]="isSubmitting">Save changes</button>
                  <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                </div>
                </div>
              </div>
              </form>
            </div>
            <div class="card-footer text-end">
              <button type="button" class="btn btn-secondary text-white me-2" (click)="gotoNavPersonalHealth()">
              Next
              </button>
            </div>
            </div>

          <div class="tab-pane fade" id="navPersonalHealth" role="tabpanel">
            <!-- Personal Health History Content -->
            <div class="card mb-5">
              <div class="card-header">
                <h4 class="card-header-title">Personal Health History</h4>
              </div>
              <div class="card-body pt-4">
                  <div *ngIf="patientPersonalHealthForm">

                <form [formGroup]="patientPersonalHealthForm" (ngSubmit)="patientPersonalHealthFormSubmit()">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-3" style="display: none;">
                        <label for="lname" class="form-label">Patient Code</label>
                        <input class="form-control" type="text" formControlName="patientCode" placeholder="Enter Last Name">
                      </div>
                      <div class="col-md-4">
                        <label for="bp" class="form-label">Blood Pressure</label>
                        <input class="form-control" type="text" id="bp" formControlName="patientBloodPressure" placeholder="e.g., 120/80">
                      </div>

                      <div class="col-md-4">
                        <label for="height" class="form-label">Height (cm)</label>
                        <input class="form-control" type="text" id="height" formControlName="patientHeight" placeholder="Enter Height">
                      </div>

                      <div class="col-md-4">
                        <label for="weight" class="form-label">Weight (kg)</label>
                        <input class="form-control" type="text" id="weight" formControlName="patientWeight" placeholder="Enter Weight">
                      </div>

                      <div class="col-md-4">
                        <label for="rr" class="form-label">Respiratory Rate (RR)</label>
                        <input class="form-control" type="text" id="rr" formControlName="patientRr" placeholder="Enter RR">
                      </div>

                      <div class="col-md-4">
                        <label for="cr" class="form-label">Cardiac Rate (CR)</label>
                        <input class="form-control" type="text" id="cr" formControlName="patientCr" placeholder="Enter CR">
                      </div>
                      <div class="col-md-12">
                        <label for="personalHealth" class="form-label">Personal Health History</label>
                        <textarea class="form-control" id="personalHealth" formControlName="patientHealthHistory" rows="2"
                          placeholder="Enter Personal Health History"></textarea>
                      </div>
                      <div class="col-md-12">
                        <label for="tattoosScars" class="form-label">Tattoo Marks/Scars</label>
                        <textarea class="form-control" id="tattoosScars" formControlName="patientTattooMarks" rows="2"
                          placeholder="Describe any tattoo marks or scars"></textarea>
                      </div>

                    </div>
                  </div>

                  <hr>
                  <div class="mt-4">
                    <button type="submit" class="btn btn-primary me-3 text-white" [disabled]="isSubmitting">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                </form>
              </div>
            </div>
            </div>
            <div class="card-footer text-end">
              <button type="button" class="btn btn-secondary text-white me-2" (click)="gotoNavFamilyHealth()">
                Next
              </button>
            </div>
          </div>


          <!-- <div class="tab-pane fade" id="navFamilyHealth" role="tabpanel">
            <div class="card mb-5">
              <div class="card-header">
                <h4 class="card-header-title">Family Health Record</h4>
              </div>
              <div class="card-body pt-4">
                <div *ngIf="FamHealthHistoryForm">
                  <form [formGroup]="FamHealthHistoryForm" (ngSubmit)="patientFamHealthFormSubmit()">
                  <div class="row g-4">
                    <div class="row">
                      <div class="col-md-12">
                        <table class="table table-bordered">
                          <thead>
                            <tr>
                              <th>Name</th>
                              <th>Blood Pressure</th>
                              <th>Height</th>
                              <th>Weight</th>
                              <th>RR</th>
                              <th>CR</th>
                              <th>Tattoo Marks/Scars</th>
                            </tr>
                          </thead>
                            <tbody formArrayName="famHealths">
                              <tr *ngFor="let famHealth of famHealths.controls; let i = index" [formGroupName]="i">
                                <td>
                                  <input class="form-control" type="text" formControlName="familyName" placeholder="Enter Name" required>
                                </td>
                                <td>
                                  <input class="form-control" type="text" formControlName="familyBloodPressure" placeholder="Enter BP" required>
                                </td>
                                <td>
                                  <input class="form-control" type="text" formControlName="familyHeight" placeholder="Enter Height" required>
                                </td>
                                <td>
                                  <input class="form-control" type="text" formControlName="familyWeight" placeholder="Enter Weight" required>
                                </td>
                                <td>
                                  <input class="form-control" type="text" formControlName="familyRr" placeholder="Enter RR" required>
                                </td>
                                <td>
                                  <input class="form-control" type="text" formControlName="familyCr" placeholder="Enter CR" required>
                                </td>
                                <td>
                                  <input class="form-control" type="text" formControlName="familyTattooMarks" placeholder="Enter Marks/Scars" required>
                                </td>
                              </tr>
                            </tbody>


                        </table>
                        <br>
                        <button type="button" class="btn btn-secondary" (click)="FamHealthHistoriesaddRow()" >Add Row</button>
                      </div>
                    </div>
                  </div>
                  <hr>
                  <div class="mt-6">
                    <button type="submit" class="btn btn-primary me-3 text-white" [disabled]="isSubmitting">Save changes</button>
                    <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                  </div>
                </form>
              </div>
            </div>
            <div class="card-footer text-end">
              <button type="button" class="btn btn-secondary text-white me-2" (click)="gotoAppHisto()">
                Next
              </button>
            </div>
          </div>
        </div> -->
      </div>
    </div>
  </div>

    <div class="tab-pane fade hide" id="ApplicationHisto" role="tabpanel">
      <div class="row">
        <div class="col-md-7">
          <div class="card mb-5">
            <div class="card-header">
              <h4 class="card-header-title">Staff's Assessment</h4>
              <hr>
            </div>
            <div class="card-body pt-4">
                <form [formGroup]="AssessmentForm"  (ngSubmit)="AssessmentFormSubmit()">
                <div class="row g-4">
                  <div class="row">
                    <div class="row">
                      <div class="col-md-3" hidden>
                        <label for="lname" class="form-label">Patient Code</label>
                        <input class="form-control" type="text" formControlName="patientCode" placeholder="Enter Last Name">
                      </div>
                    <div formArrayName="admissionCode" class="row">
                  <div *ngFor="let x of admissionType" class="form-check mb-0 ms-2 col-md-2">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      [value]="x.admissionCode"
                      (change)="onAdmissionTypeCheckboxChange($event, x)"
                      [checked]="admissionCodeArray.value.includes(x.admissionCode)">
                    {{ x.admissionDesc }}
                  </div>
                </div>

                    </div>

                    <div class="col-md-12">
                      <label for="Assessment" class="form-label">Assessment</label>
                      <textarea class="form-control" id="Assessment" formControlName="admittingStaffAssessment" rows="2"
                      placeholder="Enter Assessment"></textarea>
                    </div>
                    <div class="col-md-12">
                      <label for="Plan" class="form-label">Plan</label>
                      <textarea class="form-control" id="Plan" formControlName="admittingStaffPlan" rows="2"
                      placeholder="Enter Plan"></textarea>
                    </div>

                    <div class="col-md-12">
                      <label for="appDate" class="form-label">Application Date</label>
                      <input type="date" formControlName="patientAssessmentDate" class="form-control"  placeholder="Enter Date">
                    </div>
                    <div class="divider text-end">
                      <div style="text-decoration: underline;">Prepared By:</div>
                    </div>
                    <div class="divider text-end">
                      <div>{{ userInfo.name }}</div>
                    </div>

                  </div>
                </div>
                <hr>
                <div class="mt-6">
                  <button type="submit" class="btn btn-primary me-3 text-white" [disabled]="isSubmitting">Save changes</button>
                  <button type="reset" class="btn btn-outline-secondary">Cancel</button>
                </div>
              </form>
          </div>
          </div>
        </div>

        <!-- Right Side: New Card -->
        <div class="col-md-5">
          <div class="card">
            <div class="card-header">
              <h4 class="card-header-title">Application History</h4>
            </div>
            <div class="card-body" style="height: 400px; overflow-y: auto;">
              <div class="table-responsive" style="max-height: 350px; overflow-y: auto;">
                <table class="table table-bordered table-striped table-hover">
                  <thead class="table-dark text-center">
                    <tr >
                      <th style="width: 5%;">#</th>
                      <th style="width: 50%;">Date</th>
                      <th style="width: 20%;">Type</th>
                      <th style="width: 20%;">Status</th>
                      <th style="width: 5%;">Action</th>
                    </tr>
                  </thead>
                   <tbody class="table-border-bottom-0">
                    <tr *ngFor="let s of appHistory">
                      <td class="text-center">1</td>
                      <td>{{s.assessmentDate}}</td>
                      <td>{{s.type}}</td>
                      <td>OnDev</td>
                      <td class="text-center">
                        <button type="button" class="btn btn-sm btn-primary text-white" title="View Details" (click)="goToPatientDashboard(s.patientCode,s.assessmentCode)">
                          <i class="bx bx-show"></i> <!-- Eye Icon -->
                        </button>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>

          </div>
        </div>



      </div>
    </div>
  </div>
</div>
